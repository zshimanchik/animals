# Analysis

## Previous version
Git source: https://github.com/zshimanchik/iron-unconditioned-reflexes

#### 1e0cd22

Мамонты появляются лишь на половине экрана, что должно создать надёжную зону для выживания.

Запись 1

Иногда, у некоторых особей было нужное поведение: крутиться около мамонта, но при пище стремиться к ней. Но одновременно
так случалось только у пары особей и мамонта они не валили ибо были одиноки и наедине с мамонтом умирали. К тому же 
кажется что нету стимула для того, чтобы валить мамонта, ибо еды хватает, но в то же время эта запись кончилась тем, что
остались одни девочки, а мальчики умерли. Т.к. запись кончилась досрочно на 286000 цикле, запахи еще не включились и 
проанализировать их сигналы не было возможности.

Идеи для решения проблемы: увеличить ширину мира,  чтобы зоны с мамонтами и без были более изолированы и энималам было 
сложнее перескочить из одной в другую.  Кроме того, уменьшить вероятность появления пищи в зоне с мамонтами. Таким 
образом получим одну благоприятную зону для поддержания численности агентов и другую зону, со стимулом к эволюции в 
интересующую сторону для нас.

Запись 2

Мамонты скучковались и их было сложно завалить. Ибо бегая рядом энималы валили то одного, то другого. Иногда попадались 
такие особи которые реалировали на мамонтов и зависали возле них, но не находя поддержки в частых услучаях они так и 
умирали, но пару раз всё-таки по воле случая мимо проходили другие энималы и валили мамонта, после чего все ближайшие 
энималы сбегались и ибыстро съедали что получилось.

#### d4d3439

за 10 часов записи сменилось 16 миров. Не выживает первое поколение. Не равномерное было увеличение размера мира, 
количество старовой пищи и стартовая популяция энималов.

хм... это есть баг. food_timer работает не правильно, при увеличении  размера поля - еда появляется реже. Так что мало 
того, что увеличилась площать мира, так еще и пища стала реже появляться, а значит в этом моделировании были жестокие 
условия для существования.

- 1-4 миры - не выжило первое поколение
- 5 -  несколько особей кое-как выжило, за это время на поле накопилось достаточно много еды и в один момент случился 
взрыв численности в левой части мира, и все особи как саранча стала равномерно продвигаться в правую его часть. 
Опустошив полностью еда не успела восстановится и оставшейся пищи не хватило на виживание.
- 6 - некоторые особи сформировали хорошую реакцию достаточно рано и благодоря отдельным особям и удачному стечению 
обстоятельств мир продержался 60000 циклов. но условия всё равно были слишком жесткими.
- 7 - остлось пару особей которые заросли едой, но были далеко друг от друга. и из-за отсутствия изменений мир 
перезагрузился.
- 8,9 - не выжило первое поколение
- 10 - отсутствие изменений
- 11 -не выжило первое поколение
- 12 - ситуация похожая на 6 мир, но были попытки крутится около мамонтов. Но завалить не получилось из-за недолгого 
пребывания возле него, хотя особей было достаточно много.
- 13,14,15 - не выжило первое поколение
- 16 - мир выключен незавершенным.

Вывод: фиксить баг.

#### 822d59c

Чтож мир стал вполне стабильным. В левой части всегда благоприятная зона и популяция там всегда большая, в правой - 
наоборот, но есть мамонты. за 400 000 циклов было много убийств мамонтов, но я по моему мнению они были в основном 
случайны, либо  не вызымели продолжения, из-за того, что условия в целом неблагоприятные, даже те особи, которые 
собирались у мамонта после съеданые пищи из него в скором времени умирали. возможно просто не хватило времени чтобы 
эволюция свершилась. зато много случаев было, когда две особи достаточно много времени проводили около мамонтов, может 
стоит сделать возможность двум особям убивал мамонта? а возможно стоит усилить запах энималов, чтобы они могли дальше 
сообщать. сейчас я испытываю большой дискомфорт в записывании моделирования мира. ибо я не могу что0то еще делать за 
компом пока оно включено.

#### d59c4ec

Возможно стоило бы добавлять новых мамонтов подальше от существующих, чтобы не образовывалось групп, которых сложно 
завалить. Значения MAMMOTH_BEAT_VALUE и MAMMOTH_REGENERATION_VALUE считаю приемлимыми.  и возможно для того, чтобы они 
эволюционировали нужно больше времени. Но эта запись заняла 9 часов на ~225000 циклов. стоит либо увеличить 
производительность, либо создать запись мира, что более желательно.


## New version.

Git source: https://github.com/zshimanchik/animals

#### 47db711

Переписал на CPython + qt. Даже не оптимизируя, в один поток она работала также быстро как в три на IronPython. Однако 
тут уже оптимизировав код используя библиотеку numpy, добился перформенса в пять раз быстре, чем в три потока 
IronPython, а используя некоторые уловки и в десять. Но при этом можно запускать 3 инстанса программы одновременно 
(т.к. имею 3 ядра).

Поставив на ночь на запись в формате mkv три окна программы, у меня кончилось место на диске, а было свободно 5.7GB. 
самый старый мир дошел до 786000 цикла. Но требуемого поведения не наблюдается. Иногда, получалось так, что большой 
кучей энималы собирались вокруг мамонтов и валили их. Но сложно сказать достаточное ли было поощрение за это поведение. 
Смогли ли они создать потомство на ту энергию, что получили. Кажется что нет. К тому же остальной еды достаточно много, 
чтобы они могли не заморачиватся мамонтами.

Следует уменьшить количество еды, и возможно уменьшить дисперсию появления её, чтобы условия в правой части были еще 
жёстче.

#### dbf57c2

Кажется слишком малое поощрение за мамонта.

#### 7ae473d food-and-mammoths

Несколько раз запускал моделирование. Один раз на 300 000 цикле они реагировали на мамонтов и большой стайкой охотились 
за ними, но в первую очередь поглощали еду, а уже потом бежали к мамонтам. Однако повторить эту эволюцию не получилось 
уже несколько раз запускал моделирование, когда мир доходил до 1 500 000 цикла, но подобного поведения больше не 
формировалось. Следует запустить еще несколько раз.

Но по наблюдениям за миром можно сказать, но на начальных этапах, рождаться с отклонением, при котором стремишься к 
мамонту не выгодно, ибо одного энимала не достаточно чтобы завалить мамонта, и в итоге эта особь умирает в одиночестве 
рядом с мамонтом.

#### 77ad2bd food-and-mammoths

- мир 1, макс цикл = 2 000 000, реакция - есть. Зачатки поведения, стремящегося к мамонтам во вторую очередь после еды, 
появились на 300 000 цикле, и до 600 000 оставались невыраженными, и на 700 000 уже произошёл какой-то качественный 
скачок в их поведении, они стали стремится к мамонтам и численность населения в правой части экрана резко возросла, с 
поведение в точности от них ожидаемым.
- мир 2, макс цикл = 2 100 000, реакция - нет.
- мир 3, макс цикл = 2 100 000, реакция - нет.

Возможно стоит добавлять циклы зимы-лето. в правой части большую часть времени находятся энималы, которые более или 
менее приспособлены к жизни в ней и так или иначе обладают зачатками нужного поведения. и возможно стоит позволить им 
создать потомство для рекомбинации генов. Для этого улучшить условия и добавлять пищу чаще, а после этого вновь 
ужесточить.

Предположения по поводу того, как могло возникло необходимое поведение:
1. Энимали в левой части сцены, совершенно случайно стали обладать генами, которые позволяют им стремится к мамонтам во 
вторую очередь после еды. Учитывая малый размер нейронной сети, это не так невероятно.
2. Второй - особям в правой части, которые более или менее присоблены к ней, повезло им досталось много еды и они 
наделали потомства со своими генами.

#### ef9dee7 food-and-mammoths

Добавил циклы зима-лето

- мир 1, длительность года = 20 000, макс цикл = 500 000,  реакция - есть. на 200 000 была. признаки на такое поведение 
появились уже на 100 000 цикле
- мир 2, длительность года = 40 000, макс цикл = 590 000, реакция - нет
- мир 3, длительность года = 80 000, макс цикл = 570 000, реакция - нет
- мир 4, длительность года = 20 000, макс цикл = 1 300 000, реакция - нет
- мир 5, длительность года = 40 000, макс цикл = 1 200 000, реакция - нет
- мир 6, длительность года = 80 000, макс цикл = 1 300 000, реакция - есть. на 1 280 000 была (какая-то не стабильная). 
Могла раньше признаков  не было. однако загрузившись с 1 160 000 возникала вновь.

#### 674daf3 food-and-mammoths

Должно быть аналогично 77ad2bd - т.е. без циклов зима-лето.

Из шести запусков до 900 000 цикла, реакция сформировалось у двух. видимо, циклы зима-лето не играют роли.

#### 674daf3 food-and-mammoths

Продолжив вычисления на тех же мирах. реакция появилась еще у нескольких миров.

1 - есть, 2 - нет, 3 - есть, 4 - нет, 5 - есть, 6 - есть

Вопрос только как она сформировалась, ибо на последних циклах, в правой части очень много энималов и они валят мамонтов 
автоматически, из-за этого не видно есть ли у них вообще какая-то реакция на запах мамонтов.

#### 4bee79f6 master

При следующих параметрах поведение стремления к мамонтам во вторую очередь формируется довольно великовероятностно.

```
self.MAMMOTH_BEAT_VALUE = 0.007
self.MAMMOTH_REGENERATION_VALUE = 0.01
```

После того как это поведение сформировано можно усложнить добычу мамонта и они всё равно будут продолжать это делать,
однако если сразу поставить сложные условия добычи мамонтов, то формирование поведения усложниться.  

```
self.MAMMOTH_BEAT_VALUE = 0.003
self.MAMMOTH_REGENERATION_VALUE = 0.005
```

Пока ничего конкретного, но вопрос заключается в том: а как сложно сформировать это поведение? какие условия должны быть
для успешного формирования? Возможно это холм в ландшафте поведения вырос в связи с изменениями этих параметров.

Тогда встаёт вопрос, может ли быть ландшафт на который невозможно вскарабкаться? (Крайне маловероятно добраться за 
приемлимый промежуток времени). И значит ли это, что для сложной горы в ландафте поведения должна всегда быть какая-либо
"тропинка", которая ведёт на гору? Может быть с некоторыми "порогами" на которые будет тратиться значительное время.

Возможно было бы интересно запустить несколько симуляций с "сеткой" параметров, чтобы составить этот ландшафт 
веротяности формирования поведения. 
